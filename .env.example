# =============================================================================
# RAGent Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=ragent
POSTGRES_PASSWORD=ragent_secret
POSTGRES_DB=ragent

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# -----------------------------------------------------------------------------
# Ollama Configuration
# -----------------------------------------------------------------------------
OLLAMA_BASE_URL=http://localhost:11434

# Model names (use quantized versions for better performance)
OLLAMA_VISION_MODEL=qwen2-vl:7b-instruct-q4_K_M
OLLAMA_TEXT_MODEL=qwen2.5:7b-instruct-q4_K_M
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# Keep models loaded in memory (reduces swap latency)
OLLAMA_KEEP_ALIVE=60m

# -----------------------------------------------------------------------------
# Performance Tuning
# -----------------------------------------------------------------------------
# Embedding batch size (process multiple chunks at once)
EMBEDDING_BATCH_SIZE=16

# Vision gating - skip vision model if images occupy less than this ratio of page
VISION_GATING_ENABLED=true
VISION_GATING_MIN_IMAGE_RATIO=0.05

# Response cache TTL in seconds
RESPONSE_CACHE_ENABLED=true
RESPONSE_CACHE_TTL_SECONDS=3600

# Context management
MAX_HISTORY_TOKENS=2048
SUMMARIZE_AFTER_MESSAGES=10

# -----------------------------------------------------------------------------
# Session Management (Redis TTLs in seconds)
# -----------------------------------------------------------------------------
SESSION_TTL_SECONDS=1800
CHAT_HISTORY_TTL_SECONDS=86400
PROCESSING_JOB_TTL_SECONDS=3600

# -----------------------------------------------------------------------------
# Document Processing
# -----------------------------------------------------------------------------
# Chunk size in characters
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Maximum file upload size in MB
MAX_UPLOAD_SIZE_MB=50

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_CORS_ORIGINS=["http://localhost:3000","http://localhost:5173"]

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
VITE_API_URL=http://localhost:8000
